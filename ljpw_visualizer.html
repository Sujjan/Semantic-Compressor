<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LJPW 4D Semantic Space Visualizer</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1e1e2e 0%, #2d2d44 100%);
            color: #e0e0e0;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
        }

        h1 {
            text-align: center;
            color: #00d4ff;
            margin-bottom: 10px;
            font-size: 2.5em;
            text-shadow: 0 0 10px rgba(0, 212, 255, 0.5);
        }

        .subtitle {
            text-align: center;
            color: #888;
            margin-bottom: 30px;
            font-size: 1.1em;
        }

        .main-grid {
            display: grid;
            grid-template-columns: 300px 1fr;
            gap: 20px;
            margin-bottom: 20px;
        }

        .controls {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
            padding: 20px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .viz-container {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
            padding: 20px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            position: relative;
        }

        .slider-group {
            margin-bottom: 25px;
        }

        .slider-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            font-size: 0.9em;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .slider-group.love label { color: #ff6b6b; }
        .slider-group.justice label { color: #4dabf7; }
        .slider-group.power label { color: #ffd43b; }
        .slider-group.wisdom label { color: #51cf66; }

        input[type="range"] {
            width: 100%;
            height: 6px;
            border-radius: 5px;
            outline: none;
            -webkit-appearance: none;
        }

        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 18px;
            height: 18px;
            border-radius: 50%;
            background: #00d4ff;
            cursor: pointer;
            box-shadow: 0 0 10px rgba(0, 212, 255, 0.5);
        }

        .love input[type="range"] { background: linear-gradient(to right, #333, #ff6b6b); }
        .justice input[type="range"] { background: linear-gradient(to right, #333, #4dabf7); }
        .power input[type="range"] { background: linear-gradient(to right, #333, #ffd43b); }
        .wisdom input[type="range"] { background: linear-gradient(to right, #333, #51cf66); }

        .value-display {
            margin-top: 5px;
            font-size: 0.9em;
            color: #aaa;
        }

        canvas {
            width: 100%;
            height: 600px;
            border-radius: 10px;
            background: #1a1a2e;
        }

        .presets {
            margin-top: 20px;
            padding-top: 20px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }

        .preset-btn {
            width: 100%;
            padding: 10px;
            margin-bottom: 8px;
            background: rgba(0, 212, 255, 0.1);
            border: 1px solid rgba(0, 212, 255, 0.3);
            color: #00d4ff;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 0.9em;
        }

        .preset-btn:hover {
            background: rgba(0, 212, 255, 0.2);
            transform: translateY(-2px);
        }

        .info-panel {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
            padding: 20px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .info-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
        }

        .info-item {
            background: rgba(0, 0, 0, 0.3);
            padding: 15px;
            border-radius: 8px;
            border-left: 3px solid #00d4ff;
        }

        .info-item h3 {
            color: #00d4ff;
            margin-bottom: 8px;
            font-size: 0.9em;
        }

        .info-item p {
            font-size: 0.85em;
            color: #ccc;
            line-height: 1.4;
        }

        .genome-display {
            text-align: center;
            font-size: 2em;
            font-weight: bold;
            color: #00d4ff;
            margin: 15px 0;
            padding: 15px;
            background: rgba(0, 212, 255, 0.1);
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            letter-spacing: 2px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>LJPW 4D Semantic Space Visualizer</h1>
        <p class="subtitle">Interactive visualization of the coordinate system of meaning</p>

        <div class="main-grid">
            <!-- Controls -->
            <div class="controls">
                <div class="slider-group love">
                    <label for="love">Love (Safety)</label>
                    <input type="range" id="love" min="0" max="100" value="50">
                    <div class="value-display">Value: <span id="love-value">0.50</span></div>
                </div>

                <div class="slider-group justice">
                    <label for="justice">Justice (Structure)</label>
                    <input type="range" id="justice" min="0" max="100" value="50">
                    <div class="value-display">Value: <span id="justice-value">0.50</span></div>
                </div>

                <div class="slider-group power">
                    <label for="power">Power (Performance)</label>
                    <input type="range" id="power" min="0" max="100" value="50">
                    <div class="value-display">Value: <span id="power-value">0.50</span></div>
                </div>

                <div class="slider-group wisdom">
                    <label for="wisdom">Wisdom (Design)</label>
                    <input type="range" id="wisdom" min="0" max="100" value="50">
                    <div class="value-display">Value: <span id="wisdom-value">0.50</span></div>
                </div>

                <div class="genome-display" id="genome">L5J5P5W5</div>

                <div class="presets">
                    <h3 style="color: #00d4ff; margin-bottom: 10px;">Presets</h3>
                    <button class="preset-btn" onclick="setPreset('natural')">Natural Equilibrium</button>
                    <button class="preset-btn" onclick="setPreset('anchor')">Anchor Point</button>
                    <button class="preset-btn" onclick="setPreset('prototype')">Prototype Code</button>
                    <button class="preset-btn" onclick="setPreset('production')">Production Code</button>
                    <button class="preset-btn" onclick="setPreset('startup')">Early Startup</button>
                    <button class="preset-btn" onclick="setPreset('hero')">Hero's Journey</button>
                </div>
            </div>

            <!-- Visualization -->
            <div class="viz-container">
                <canvas id="canvas"></canvas>
            </div>
        </div>

        <!-- Info Panel -->
        <div class="info-panel">
            <div class="info-grid">
                <div class="info-item">
                    <h3>Distance from Natural Equilibrium</h3>
                    <p id="dist-ne">0.000</p>
                </div>
                <div class="info-item">
                    <h3>Distance from Anchor Point</h3>
                    <p id="dist-anchor">0.000</p>
                </div>
                <div class="info-item">
                    <h3>System Health</h3>
                    <p id="health">0%</p>
                </div>
                <div class="info-item">
                    <h3>Archetype</h3>
                    <p id="archetype">Balanced</p>
                </div>
            </div>
        </div>
    </div>

    <script>
        const canvas = document.getElementById('canvas');
        const ctx = canvas.getContext('2d');

        // Set canvas size
        function resizeCanvas() {
            canvas.width = canvas.offsetWidth;
            canvas.height = canvas.offsetHeight;
            draw();
        }
        window.addEventListener('resize', resizeCanvas);
        resizeCanvas();

        // Constants
        const NE = { L: 0.618, J: 0.414, P: 0.718, W: 0.693 };
        const ANCHOR = { L: 1.0, J: 1.0, P: 1.0, W: 1.0 };

        // State
        let currentPos = { L: 0.5, J: 0.5, P: 0.5, W: 0.5 };

        // Update functions
        function updateValue(dimension, value) {
            const normalizedValue = value / 100;
            currentPos[dimension] = normalizedValue;
            document.getElementById(`${dimension.toLowerCase()}-value`).textContent = normalizedValue.toFixed(2);
            updateDisplay();
            draw();
        }

        function updateDisplay() {
            // Update genome
            const L = Math.round(currentPos.L * 10) % 10;
            const J = Math.round(currentPos.J * 10) % 10;
            const P = Math.round(currentPos.P * 10) % 10;
            const W = Math.round(currentPos.W * 10) % 10;
            document.getElementById('genome').textContent = `L${L}J${J}P${P}W${W}`;

            // Calculate distances
            const distNE = Math.sqrt(
                Math.pow(currentPos.L - NE.L, 2) +
                Math.pow(currentPos.J - NE.J, 2) +
                Math.pow(currentPos.P - NE.P, 2) +
                Math.pow(currentPos.W - NE.W, 2)
            );

            const distAnchor = Math.sqrt(
                Math.pow(currentPos.L - ANCHOR.L, 2) +
                Math.pow(currentPos.J - ANCHOR.J, 2) +
                Math.pow(currentPos.P - ANCHOR.P, 2) +
                Math.pow(currentPos.W - ANCHOR.W, 2)
            );

            document.getElementById('dist-ne').textContent = distNE.toFixed(3);
            document.getElementById('dist-anchor').textContent = distAnchor.toFixed(3);

            // Calculate health
            const health = Math.max(0, 1.0 - distNE / 2) * 100;
            document.getElementById('health').textContent = health.toFixed(0) + '%';

            // Determine archetype
            let archetype = 'Balanced';
            if (distNE < 0.3) archetype = 'Natural (Optimal)';
            else if (currentPos.L > 0.7 && currentPos.J > 0.7 && currentPos.P < 0.4) archetype = 'Bureaucrat';
            else if (currentPos.L < 0.4 && currentPos.P > 0.7) archetype = 'Prototype';
            else if (currentPos.L > 0.7 && currentPos.J > 0.7 && currentPos.P > 0.7) archetype = 'Production Ready';
            else if (currentPos.W > 0.8) archetype = 'Wise/Elegant';

            document.getElementById('archetype').textContent = archetype;
        }

        function setPreset(preset) {
            const presets = {
                natural: { L: 0.618, J: 0.414, P: 0.718, W: 0.693 },
                anchor: { L: 1.0, J: 1.0, P: 1.0, W: 1.0 },
                prototype: { L: 0.3, J: 0.2, P: 0.5, W: 0.3 },
                production: { L: 0.8, J: 0.7, P: 0.6, W: 0.7 },
                startup: { L: 0.2, J: 0.3, P: 0.9, W: 0.8 },
                hero: { L: 0.8, J: 0.9, P: 0.8, W: 0.9 }
            };

            if (presets[preset]) {
                currentPos = { ...presets[preset] };
                document.getElementById('love').value = currentPos.L * 100;
                document.getElementById('justice').value = currentPos.J * 100;
                document.getElementById('power').value = currentPos.P * 100;
                document.getElementById('wisdom').value = currentPos.W * 100;
                updateDisplay();
                draw();
            }
        }

        // Drawing function (3D projection of 4D space)
        function draw() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            const cx = canvas.width / 2;
            const cy = canvas.height / 2;
            const scale = Math.min(canvas.width, canvas.height) * 0.35;

            // Draw axes
            ctx.strokeStyle = 'rgba(255, 255, 255, 0.2)';
            ctx.lineWidth = 1;

            // L axis (x)
            ctx.beginPath();
            ctx.moveTo(cx - scale, cy);
            ctx.lineTo(cx + scale, cy);
            ctx.stroke();
            ctx.fillStyle = '#ff6b6b';
            ctx.fillText('L (Safety)', cx + scale + 10, cy);

            // J axis (y)
            ctx.beginPath();
            ctx.moveTo(cx, cy - scale);
            ctx.lineTo(cx, cy + scale);
            ctx.stroke();
            ctx.fillStyle = '#4dabf7';
            ctx.fillText('J (Structure)', cx, cy - scale - 10);

            // P axis (z depth, shown as diagonal)
            ctx.beginPath();
            ctx.moveTo(cx - scale * 0.5, cy + scale * 0.5);
            ctx.lineTo(cx + scale * 0.5, cy - scale * 0.5);
            ctx.stroke();
            ctx.fillStyle = '#ffd43b';
            ctx.fillText('P (Performance)', cx + scale * 0.5 + 10, cy - scale * 0.5);

            // Draw reference points
            drawPoint(NE.L, NE.J, NE.P, NE.W, '#51cf66', 'NE', scale, cx, cy);
            drawPoint(ANCHOR.L, ANCHOR.J, ANCHOR.P, ANCHOR.W, '#00d4ff', 'Anchor', scale, cx, cy);

            // Draw current position
            drawPoint(currentPos.L, currentPos.J, currentPos.P, currentPos.W, '#ff00ff', 'Current', scale, cx, cy, true);

            // Draw connection lines
            ctx.setLineDash([5, 5]);
            ctx.strokeStyle = 'rgba(0, 212, 255, 0.3)';
            ctx.lineWidth = 2;

            // Line to NE
            const neX = cx + (NE.L - 0.5) * scale * 2;
            const neY = cy - (NE.J - 0.5) * scale * 2;
            const currX = cx + (currentPos.L - 0.5) * scale * 2;
            const currY = cy - (currentPos.J - 0.5) * scale * 2;

            ctx.beginPath();
            ctx.moveTo(currX, currY);
            ctx.lineTo(neX, neY);
            ctx.stroke();

            ctx.setLineDash([]);
        }

        function drawPoint(l, j, p, w, color, label, scale, cx, cy, large = false) {
            // Project 4D to 2D (using L and J for position, P for depth, W for color intensity)
            const x = cx + (l - 0.5) * scale * 2;
            const y = cy - (j - 0.5) * scale * 2;
            const size = large ? 12 : 8;
            const alpha = 0.5 + p * 0.5; // P affects opacity
            const intensity = w; // W affects glow

            ctx.shadowBlur = intensity * 20;
            ctx.shadowColor = color;
            ctx.fillStyle = color;
            ctx.globalAlpha = alpha;

            ctx.beginPath();
            ctx.arc(x, y, size, 0, Math.PI * 2);
            ctx.fill();

            ctx.globalAlpha = 1;
            ctx.shadowBlur = 0;

            if (label) {
                ctx.fillStyle = color;
                ctx.font = '12px monospace';
                ctx.fillText(label, x + 15, y + 5);
            }
        }

        // Event listeners
        document.getElementById('love').addEventListener('input', (e) => updateValue('L', e.target.value));
        document.getElementById('justice').addEventListener('input', (e) => updateValue('J', e.target.value));
        document.getElementById('power').addEventListener('input', (e) => updateValue('P', e.target.value));
        document.getElementById('wisdom').addEventListener('input', (e) => updateValue('W', e.target.value));

        // Initialize
        updateDisplay();
        draw();
    </script>
</body>
</html>
